<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aimicus App</title>
<style>
/* Base styles */
body {
    font-family: 'Open Sans', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    min-height: 100vh;
    margin: 0;
}

/* Screen management */
.screen {
    display: none;
    width: 100%;
    flex-direction: column;
    align-items: center;
}

.screen.active {
    display: flex;
}

/* Landing screen styles */
.header {
    text-align: center;
    margin-bottom: 30px;
}

.header h1 {
    font-size: 36px;
    margin: 0;
    line-height: 1.4;
}

.logo {
    width: 400px;
    height: 400px;
    margin: 30px 0;
}

.logo img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.steps {
    text-align: center;
    font-size: 32px;
    margin-bottom: 30px;
}

.bullet-points {
    max-width: 600px;
    font-size: 32px;
    margin-bottom: 40px;
}

.bullet-points ul {
    list-style-type: disc;
    text-align: left;
    padding-left: 20px;
}

.bullet-points li {
    margin-bottom: 15px;
    line-height: 1.4;
}

.action-button {
    background-color: #4CAF50;
    color: white;
    border: none;
    padding: 15px 30px;
    font-size: 32px;
    cursor: pointer;
    text-transform: uppercase;
    margin: 10px;
}

.button-container {
    display: flex;
    gap: 20px;
    margin: 30px 0;
}

/* Introduction screen styles */
.intro-header {
    font-size: 32px;
    color: #0000FF;
    text-align: center;
    margin: 30px 0;
}

.intro-points {
    max-width: 600px;
    font-size: 32px;
    margin: 20px 0;
}

.intro-points ul {
    list-style-type: disc;
    padding-left: 20px;
    margin-bottom: 40px;
}

.intro-points li {
    margin-bottom: 15px;
    line-height: 1.4;
}

/* Input screen styles */
.theme-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    max-width: 1200px;
    padding: 20px;
    margin: 0 auto;
}

.theme-item {
    position: relative;
    aspect-ratio: 1;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
    overflow: hidden;
}

.theme-item img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.theme-item.selected {
    position: relative;
}

.theme-item.selected::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.7);
}

.theme-item.selected::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 48px;
    color: #000;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.5);
}

.input-screen-header {
    text-align: center;
    margin: 20px 0;
}

.input-screen-header h1 {
    font-size: 32px;
    margin: 0;
}

.input-screen-header .highlight {
    color: red;
}

.input-screen-subheader {
    font-size: 32px;
    color: #000;
    text-align: center;
    margin: 10px 0;
}

.input-screen-subheader.italic {
    font-style: italic;
}

/* Second Input Screen styles */
.dotted-section {
    border: 2px dotted #000;
    margin: 20px 0;
    padding: 20px;
    width: 90%;
    max-width: 1200px;
}

.section-header {
    text-align: center;
    font-size: 32px;
    color: red;
    font-weight: bold;
    background-color: #f0f0f0;
    padding: 10px;
    margin-bottom: 20px;
}

.column-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
}

.column-grid.grid-4,
.column-grid.grid-5 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 30px;
    padding: 20px;
}

.column-item {
    position: relative;
    aspect-ratio: 1;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
    overflow: hidden;
    width: 250px;
    height: 250px;
    margin: 0 auto;
}

.column-item img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.column-item.selected::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.7);
}

.column-item.selected::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 48px;
    color: #000;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.5);
}

/* Output Screen styles */
.output-container {
    width: 100%;
    max-width: 1200px;
    padding: 20px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.output-header {
    font-size: 36px;
    text-align: center;
    margin-bottom: 40px;
    width: 100%;
}

.theme-content {
    display: flex;
    gap: 30px;
    margin-bottom: 20px;
    width: 100%;
    align-items: flex-start;
}

.theme-image {
    width: 40%;
    max-width: 400px;
}

.theme-image img {
    width: 100%;
    height: auto;
    object-fit: contain;
}

.theme-text {
    width: 60%;
    text-align: right;
    font-size: 32px;
    line-height: 1.4;
    position: relative;
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin: 10px 0;
    width: 100%;
}

.info-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 350px;
    margin: 0 auto;
}

.info-item img {
    width: 90%;
    height: auto;
    object-fit: contain;
    margin-bottom: 20px;
}

.info-item-text,
.info-item .expandable-text {
    font-size: 32px;
    line-height: 1.4;
    margin-top: 15px;
    width: 100%;
}

.info-item:nth-child(1) .info-item-text,
.info-item:nth-child(1) .expandable-text {
    text-align: left;
}

.info-item:nth-child(2) .info-item-text,
.info-item:nth-child(2) .expandable-text {
    text-align: center;
}

.info-item:nth-child(3) .info-item-text,
.info-item:nth-child(3) .expandable-text {
    text-align: right;
}

/* Expandable text styles */
.expandable-text {
    position: relative;
    max-height: 300px;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}

.expandable-text.expanded {
    max-height: none;
}

.expand-button {
    color: blue;
    cursor: pointer;
    font-size: 30px;
    margin-top: 8px;
}

/* Responsive Design */
@media (max-width: 1024px) {
    .theme-image {
        width: 45%;
    }
    
    .theme-text {
        width: 55%;
        font-size: 28px;
    }
    
    .info-item-text,
    .info-item .expandable-text {
        font-size: 22px;
    }
    
    .info-grid {
        gap: 30px;
    }
    
    .info-item {
        max-width: 300px;
    }
}

@media (max-width: 768px) {
    .logo {
        width: 350px;
        height: 350px;
        margin: 20px 0;
    }
    
    .header h1 {
        font-size: 28px;
    }
    
    .bullet-points, 
    .intro-points {
        font-size: 24px;
        padding: 0 15px;
    }
    
    .steps, 
    .intro-header {
        font-size: 28px;
    }
    
    .action-button {
        font-size: 28px;
    }
    
    .theme-grid {
        gap: 10px;
        padding: 10px;
    }
    
    .column-grid.grid-4,
    .column-grid.grid-5 {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .theme-content {
        flex-direction: column;
    }
    
    .theme-image {
        width: 90%;
        margin: 0 auto;
    }
    
    .theme-text {
        width: 100%;
        text-align: center;
        font-size: 24px;
    }
    
    .info-grid {
        grid-template-columns: 1fr;
        gap: 40px;
    }
    
    .info-item {
        max-width: 280px;
    }
    
    .info-item img {
        width: 80%;
    }
    
    .info-item-text,
    .info-item .expandable-text {
        font-size: 20px;
        text-align: center !important;
    }
    
    .expand-button {
        font-size: 18px;
        text-align: center;
    }
}

@media (max-width: 480px) {
    .theme-text {
        font-size: 20px;
    }
    
    .info-item-text,
    .info-item .expandable-text {
        font-size: 18px;
    }
    
    .info-item {
        max-width: 250px;
    }
    
    .expand-button {
        font-size: 16px;
    }
}

</style>
</head>

<body>
<!-- Landing Screen -->
<div id="landing-screen" class="screen active">
    <div class="header">
        <h1>ELEVATE YOUR</h1>
        <h1>LEADERSHIP DEVELOPMENT</h1>
    </div>
    
    <div class="logo">
        <img src="https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/AIMICUS%20LOGO.jpg" alt="Aimicus Logo">
    </div>
    
    <div class="steps">
        IN EASY STEPS:
    </div>
    
    <div class="bullet-points">
        <ul>
            <li>Select <strong>1</strong> futuristic development theme</li>
            <li>Choose the types of information you want for that theme</li>
            <li>Get your desired information</li>
            <li>Start over (upto <strong>4</strong> times in the same session) or Exit</li>
        </ul>
    </div>
    
    <button class="action-button" onclick="showScreen('intro-screen')">
        TRY THE DEMO
    </button>
</div>

<!-- Introduction Screen -->
<div id="intro-screen" class="screen">
    <h1 class="intro-header">HIGHLIGHTS</h1>
    <div class="intro-points">
        <ul>
            <li><strong>Futuristic themes</strong> from <strong>top thinkers</strong></li>
            <li>Information about pre-read</li>
            <li><strong>Academies</strong> of global corporations</li>
            <li>Top training <strong>universities & firms</strong></li>
            <li>Ideas & trainers using <strong>fun methodologies</strong></li>
            <li>Ideas & trainers using <strong>new methodologies</strong></li>
        </ul>
    </div>
    
    <h2 class="intro-header">BENEFITS</h2>
    <div class="intro-points">
        <ul>
            <li>More <strong>choices</strong> & best-in-class <strong>information</strong> at your fingertips</li>
            <li>Development decisions can also be <strong>participant-forward</strong></li>
            <li>Consistent progress towards <strong>future-readiness</strong></li>
            <li>More potential <strong>partners to co-create</strong> new programs with</li>
            <li>More <strong>possibilities of mix-n-match</strong> depending on preferences & budgets</li>
        </ul>
    </div>
    
    <button class="action-button" onclick="initializeAndShowInputScreen()">
        START
    </button>
</div>

<!-- First Input Screen -->
<div id="first-input-screen" class="screen">
    <div class="input-screen-header">
        <h1>WHAT LEADERS MUST DO: <span class="highlight">SELECT ANY 1</span></h1>
    </div>
    
    <div class="input-screen-subheader italic">
        (from the randomised 15 of 32 themes)
    </div>
    
    <div class="input-screen-subheader">
        To modify your selection just tap/click on another image
    </div>
    
    <div class="theme-grid" id="theme-grid">
        <!-- Grid will be populated by JavaScript -->
    </div>
    
    <button class="action-button" onclick="handleNextScreen()" style="margin-top: 30px;">
        NEXT
    </button>
</div>

<!-- Second Input Screen -->
<div id="second-input-screen" class="screen">
    <div class="input-screen-header">
        <h1>DESIRED DETAILS FOR THE SELECTED THEME:</h1>
    </div>
    
    <div class="input-screen-subheader italic">
        (choose from the sets across this and the next screen)
    </div>
    
    <div class="input-screen-subheader">
        To modify your choice first tap/click on your chosen image to de-select
    </div>
    
    <!-- First Set -->
    <div class="dotted-section">
        <div class="section-header">CHOOSE ANY 2</div>
        <div class="column-grid grid-4" id="trainers-grid-1">
            <!-- Will be populated by JavaScript -->
        </div>
    </div>
    
    <!-- Second Set -->
    <div class="dotted-section">
        <div class="section-header">CHOOSE ANY 2</div>
        <div class="column-grid grid-5" id="trainers-grid-2">
            <!-- Will be populated by JavaScript -->
        </div>
    </div>
    
    <div class="button-container">
        <button class="action-button" onclick="showScreen('first-input-screen')">
            GO BACK
        </button>
        <button class="action-button" onclick="handleNextInputScreen()">
            NEXT
        </button>
    </div>
</div>

<!-- Third Input Screen -->
<div id="third-input-screen" class="screen">
    <div class="input-screen-header">
        <h1>MORE DETAILS FOR THE SELECTED THEME:</h1>
    </div>
    
    <div class="input-screen-subheader">
        To modify your choice first tap/click on your chosen image to de-select
    </div>
    
    <!-- New Methods Set -->
    <div class="dotted-section">
        <div class="section-header">CHOOSE ANY 2</div>
        <div class="column-grid grid-5" id="trainers-grid-3">
            <!-- Will be populated by JavaScript -->
        </div>
    </div>
    
    <div class="button-container">
        <button class="action-button" onclick="showScreen('second-input-screen')">
            GO BACK
        </button>
        <button class="action-button" onclick="handleFinalInputScreen()">
            GET DETAILS
        </button>
    </div>
</div>

<!-- First Output Screen -->
<div id="first-output-screen" class="screen">
    <div class="output-container">
        <h1 class="output-header">BASIC DETAILS FOR THE SELECTED THEME</h1>
        
        <!-- Theme Image and Applying Text -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="Selected Theme">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="applying-text"></div>
                <div class="expand-button" onclick="toggleText('applying-text')">...see more</div>
            </div>
        </div>
        
        <!-- Info Grid -->
        <div class="info-grid">
            <!-- Thinker & Work -->
            <div class="info-item">
                <img src="https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/THINKER%20AND%20WORK.jpg" 
                     alt="Thinker and Work">
                <div class="expandable-text" id="thinker-text"></div>
                <div class="expand-button" onclick="toggleText('thinker-text')">...see more</div>
            </div>
            
            <!-- TED Talk -->
            <div class="info-item">
                <img src="https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/TED%20TALK.jpg" 
                     alt="TED Talk">
                <div class="expandable-text" id="ted-text"></div>
                <div class="expand-button" onclick="toggleText('ted-text')">...see more</div>
            </div>
            
            <!-- Published Article -->
            <div class="info-item">
                <img src="https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/PUBLISHED%20ARTICLE.jpg" 
                     alt="Published Article">
                <div class="expandable-text" id="article-text"></div>
                <div class="expand-button" onclick="toggleText('article-text')">...see more</div>
            </div>
        </div>
        
        <button class="action-button" style="margin-top: 30px;">
            NEXT
        </button>
    </div>
</div>

<!-- Second Output Screen -->
<div id="second-output-screen" class="screen">
    <div class="output-container">
        <div class="output-header">
            <h1 class="output-header" style="font-size: 32px;">MORE DETAILS FOR THE SELECTED THEME:</h1>
<h1 class="output-header" style="color: #0000FF; font-size: 32px;">TRAINING ACADEMIES, UNIVS & FIRMS</h1>
        </div>

        <!-- First Selected Trainer -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="First Selected Trainer" id="trainer1-image">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="trainer1-text"></div>
                <div class="expand-button" onclick="toggleText('trainer1-text')">...see more</div>
            </div>
        </div>

        <!-- Second Selected Trainer -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="Second Selected Trainer" id="trainer2-image">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="trainer2-text"></div>
                <div class="expand-button" onclick="toggleText('trainer2-text')">...see more</div>
            </div>
        </div>

        <div class="button-container">
            <button class="action-button" onclick="showScreen('first-output-screen')">
                GO BACK
            </button>
            <button class="action-button" onclick="showScreen('third-output-screen')">
                NEXT
            </button>
        </div>
    </div>
</div>

<!-- Third Output Screen -->
<div id="third-output-screen" class="screen">
    <div class="output-container">
        <h1 class="output-header" style="font-size: 32px;">MORE DETAILS FOR THE SELECTED THEME:</h1>
        <h1 class="output-header" style="color: #0000FF; font-size: 32px;">IDEA & TRAINERS USING</h1>
        <h1 class="output-header" style="color: #0000FF; font-size: 32px;">FUN METHODOLOGY (1)</h1>

        <!-- First Selected Idea -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="First Selected Idea" id="idea1-image">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="idea1-text"></div>
                <div class="expand-button" onclick="toggleText('idea1-text')">...see more</div>
            </div>
        </div>

        <!-- Corresponding Trainer -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="Corresponding Trainer" id="idea1-trainer-image">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="idea1-trainer-text"></div>
                <div class="expand-button" onclick="toggleText('idea1-trainer-text')">...see more</div>
            </div>
        </div>

        <div class="button-container">
            <button class="action-button" onclick="showScreen('second-output-screen')">
                GO BACK
            </button>
            <button class="action-button" onclick="showScreen('fourth-output-screen')">
                NEXT
            </button>
        </div>
    </div>
</div>

<div id="fourth-output-screen" class="screen">
    <div class="output-container">
        <h1 class="output-header" style="font-size: 32px;">MORE DETAILS FOR THE SELECTED THEME:</h1>
        <h1 class="output-header" style="color: #0000FF; font-size: 32px;">IDEA & TRAINERS USING</h1>
        <h1 class="output-header" style="color: #0000FF; font-size: 32px;">FUN METHODOLOGY (2)</h1>

        <!-- Second Selected Idea -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="Second Selected Idea" id="idea2-image">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="idea2-text"></div>
                <div class="expand-button" onclick="toggleText('idea2-text')">...see more</div>
            </div>
        </div>

        <!-- Corresponding Trainer -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="Corresponding Trainer" id="idea2-trainer-image">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="idea2-trainer-text"></div>
                <div class="expand-button" onclick="toggleText('idea2-trainer-text')">...see more</div>
            </div>
        </div>

        <div class="button-container">
            <button class="action-button" onclick="showScreen('third-output-screen')">
                GO BACK
            </button>
            <button class="action-button" onclick="showScreen('fifth-output-screen')">
                NEXT
            </button>
        </div>
    </div>
</div>

<!-- Fifth Output Screen (Screen 10) -->
<div id="fifth-output-screen" class="screen">
    <div class="output-container">
        <h1 class="output-header" style="font-size: 32px;">MORE DETAILS FOR THE SELECTED THEME:</h1>
        <h1 class="output-header" style="color: #0000FF; font-size: 32px;">IDEA & TRAINERS USING</h1>
        <h1 class="output-header" style="color: #0000FF; font-size: 32px;">NEW METHODOLOGY (1)</h1>

        <!-- First Selected New Method Idea -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="First Selected New Method" id="new-idea1-image">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="new-idea1-text"></div>
                <div class="expand-button" onclick="toggleText('new-idea1-text')">...see more</div>
            </div>
        </div>

        <!-- Corresponding Trainer -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="Corresponding New Method Trainer" id="new-idea1-trainer-image">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="new-idea1-trainer-text"></div>
                <div class="expand-button" onclick="toggleText('new-idea1-trainer-text')">...see more</div>
            </div>
        </div>

        <div class="button-container">
            <button class="action-button" onclick="showScreen('fourth-output-screen')">
                GO BACK
            </button>
            <button class="action-button" onclick="showScreen('sixth-output-screen')">
                NEXT
            </button>
        </div>
    </div>
</div>

<!-- Sixth Output Screen (Screen 11) -->
<div id="sixth-output-screen" class="screen">
    <div class="output-container">
        <h1 class="output-header" style="font-size: 32px;">MORE DETAILS FOR THE SELECTED THEME:</h1>
        <h1 class="output-header" style="color: #0000FF; font-size: 32px;">IDEA & TRAINERS USING</h1>
        <h1 class="output-header" style="color: #0000FF; font-size: 32px;">NEW METHODOLOGY (2)</h1>

        <!-- Second Selected New Method Idea -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="Second Selected New Method" id="new-idea2-image">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="new-idea2-text"></div>
                <div class="expand-button" onclick="toggleText('new-idea2-text')">...see more</div>
            </div>
        </div>

        <!-- Corresponding Trainer -->
        <div class="theme-content">
            <div class="theme-image">
                <img src="" alt="Corresponding New Method Trainer" id="new-idea2-trainer-image">
            </div>
            <div class="theme-text">
                <div class="expandable-text" id="new-idea2-trainer-text"></div>
                <div class="expand-button" onclick="toggleText('new-idea2-trainer-text')">...see more</div>
            </div>
        </div>

        <div class="button-container">
            <button class="action-button" onclick="showScreen('fifth-output-screen')">
                GO BACK
            </button>
            <button class="action-button" onclick="showScreen('conclusion-screen')">
                NEXT
            </button>
        </div>
    </div>
</div>

<!-- Conclusion Screen (Screen 12) -->
<div id="conclusion-screen" class="screen">
    <div class="output-container">
        <div class="button-container" style="margin-bottom: 40px;">
            <button class="action-button" onclick="showScreen('sixth-output-screen')">
                GO BACK
            </button>
        </div>

        <h1 class="output-header" style="font-size: 36px;">YOU'RE DONE WITH THIS ATTEMPT!</h1>
        <h1 class="output-header" style="color: #0000FF; font-size: 36px;">In this session,</h1>
        <h1 class="output-header" style="color: #0000FF; font-size: 36px;">you have <span id="attempts-remaining">4</span> of 4 attempts remaining</h1>

        <div class="button-container" style="margin-top: 40px;">
            <button id="start-over-button" class="action-button" onclick="handleStartOver()">
                START OVER
            </button>
            <button class="action-button" onclick="handleExit()">
                EXIT
            </button>
        </div>
    </div>
</div>

<script>
// Data fetching function
async function fetchCSVData() {
  try {
    const response = await fetch('https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-app/main/Aimicus%20Text.csv');
    const csvText = await response.text();
    
    // Split into rows, handling possible quoted fields
    const rows = csvText.split('\n').map(row => {
      return row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/)
        .map(field => field.trim().replace(/^"|"$/g, ''));  // Remove quotes and trim
    });
    
    const headers = rows[0];
    const themeContent = {};
    
    rows.slice(1).forEach(row => {
      if (row.length < 5) return; // Skip incomplete rows
      const theme = row[0];
      themeContent[theme] = {
        "APPLYING THE THOUGHT": row[2].replace(/\\n/g, ' ').trim(),
        "THINKER AND WORK": row[1].replace(/\\n/g, ' ').trim(),
        "TED TALK": row[3].replace(/\\n/g, ' ').trim(),
        "PUBLISHED ARTICLE": row[4].replace(/\\n/g, ' ').trim()
      };
    });
    
    return themeContent;
  } catch (error) {
    console.error('Error fetching CSV:', error);
    return null;
  }
}

// Arrays
const allThemes = [
    "GREEN THE BUSINESS",
    "PURSUE BLUE OCEAN STRATEGIES",
    "MAKE PURPOSE UNCOMFORTABLE",
    "TREAT STRATEGY LIKE DATA SCIENCE",
    "BUILD FOR SOCIAL CAPITAL",
    "PLAY TO LEARN NOT JUST TO WIN",
    "SURPASS CURRENT ADVANTAGE",
    "FAIL FEARLESSLY",
    "EMBRACE PARADOXES",
    "THINK VUJA DE FRESH PERSPECTIVE",
    "BUILD AN ANTI FRAGILE ORG",
    "CULTIVATE DEEP WORK",
    "MAKE A TEAL SELF DRIVEN ORG",
    "TURN STRATEGY INTO STORYTELLING",
    "MAKE PURPOSE JOYFUL",
    "ANTICIPATE WEAK SIGNALS",
    "FIND OPPORTUNITY IN CONSTRAINTS",
    "STRATEGIZE FOR HYBRID MODELS",
    "TEACH MACHINES TEACH PEOPLE",
    "ESTABLISH AI DEMOCRACY",
    "DO AUGMENTATION PLUS AUTOMATION",
    "SET GEOPOLITICAL RESILIENCE HUBS",
    "RELY ON INCLUSIVE GEOPOLITICS",
    "BUILD SOFT POWER",
    "PROMOTE DIGITAL DEXTERITY FOR ALL",
    "HUMANIZE DIGITAL TRANSFORMATION",
    "HAVE ADAPTIVE DIGITAL SYSTEMS",
    "VALUE PRODUCTIVE DISSONANCE",
    "GIVE AUTONOMY TO MICRO CULTURES",
    "ADOPT RADICAL TRANSPARENCY",
    "USE BLOCKCHAIN IN GOVERNANCE",
    "MAKE ETHICS THE DIFFERENTIATOR"
];

const trainerColumns1 = [
    "TRAINING CENTERS OF CORPORATIONS",
    "TRAINERS IN NORTH AMERICA AND EUROPE",
    "TRAINERS IN SINGAPORE AND AUSTRALIA",
    "TRAINERS IN INDIA"
];

const trainerColumns2 = [
    "IDEA OF USING FINE ARTS AND PERFORMING ARTS",
    "IDEA OF USING GAMES AND ACTIVITIES",
    "IDEA OF USING DESIGN AND ENTERTAINMENT",
    "IDEA OF USING CASE STUDY AND PRESENTATION",
    "IDEA OF USING EMBEDDED MICRO LEARNING"
];

const trainerColumns3 = [
    "IDEA OF USING AR AND VR",
    "IDEA OF USING GAMIFICATION AND SIMULATION",
    "IDEA OF USING BIO FEEDBACK AND NEURO PROFILING",
    "IDEA OF USING REAL TIME BEHAVIOUR ANALYTICS",
    "IDEA OF USING GEN AI"
];

// Selection tracking variables
let selectedThemeImage = null;
let selectedTrainers1 = [];
let selectedTrainers2 = [];
let selectedTrainers3 = [];
let attemptsRemaining = 4;

// Functions
function showScreen(screenId) {
    document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
    });
    document.getElementById(screenId).classList.add('active');
}

function getRandomThemes(themes, count) {
    let shuffled = [...themes].sort(() => 0.5 - Math.random());
    return shuffled.slice(0, count);
}

function selectTheme(element, themeName) {
    document.querySelectorAll('.theme-item').forEach(item => {
        item.classList.remove('selected');
    });
    element.classList.add('selected');
    selectedThemeImage = themeName;
}

function initializeAndShowInputScreen() {
    const selectedThemes = getRandomThemes(allThemes, 15);
    const grid = document.getElementById('theme-grid');
    grid.innerHTML = '';
    
    selectedThemes.forEach(theme => {
        const item = document.createElement('div');
        item.className = 'theme-item';
        const img = document.createElement('img');
        img.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/themes/${theme}.jpg`;
        img.alt = theme;
        item.appendChild(img);
        item.onclick = () => selectTheme(item, theme);
        grid.appendChild(item);
    });
    
    showScreen('first-input-screen');
}

function handleNextScreen() {
    if (!selectedThemeImage) {
        alert('SELECT ANY 1');
        return;
    }
    
    // Decrement attempts when moving past theme selection
    attemptsRemaining--;
    updateAttemptsDisplay();
    
    initializeSecondInputScreen();
    showScreen('second-input-screen');
}

function initializeSecondInputScreen() {
    const grid1 = document.getElementById('trainers-grid-1');
    const grid2 = document.getElementById('trainers-grid-2');
    grid1.innerHTML = '';
    grid2.innerHTML = '';
    
    trainerColumns1.forEach(trainer => {
        const item = document.createElement('div');
        item.className = 'column-item';
        const img = document.createElement('img');
        img.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${trainer}.jpg`;
        img.alt = trainer;
        item.appendChild(img);
        item.onclick = () => selectTrainer1(item, trainer);
        grid1.appendChild(item);
    });
    
    trainerColumns2.forEach(trainer => {
        const item = document.createElement('div');
        item.className = 'column-item';
        const img = document.createElement('img');
        img.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${trainer}.jpg`;
        img.alt = trainer;
        item.appendChild(img);
        item.onclick = () => selectTrainer2(item, trainer);
        grid2.appendChild(item);
    });
    
    selectedTrainers1 = [];
    selectedTrainers2 = [];
}

function selectTrainer1(element, trainerName) {
    if (element.classList.contains('selected')) {
        element.classList.remove('selected');
        selectedTrainers1 = selectedTrainers1.filter(t => t !== trainerName);
    } else if (selectedTrainers1.length < 2) {
        element.classList.add('selected');
        selectedTrainers1.push(trainerName);
    }
}

function selectTrainer2(element, trainerName) {
    if (element.classList.contains('selected')) {
        element.classList.remove('selected');
        selectedTrainers2 = selectedTrainers2.filter(t => t !== trainerName);
    } else if (selectedTrainers2.length < 2) {
        element.classList.add('selected');
        selectedTrainers2.push(trainerName);
    }
}

function selectTrainer3(element, trainerName) {
    if (element.classList.contains('selected')) {
        element.classList.remove('selected');
        selectedTrainers3 = selectedTrainers3.filter(t => t !== trainerName);
    } else if (selectedTrainers3.length < 2) {
        element.classList.add('selected');
        selectedTrainers3.push(trainerName);
    }
}

function initializeThirdInputScreen() {
    const grid3 = document.getElementById('trainers-grid-3');
    grid3.innerHTML = '';
    
    trainerColumns3.forEach(trainer => {
        const item = document.createElement('div');
        item.className = 'column-item';
        const img = document.createElement('img');
        img.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${trainer}.jpg`;
        img.alt = trainer;
        item.appendChild(img);
        item.onclick = () => selectTrainer3(item, trainer);
        grid3.appendChild(item);
    });
    
    selectedTrainers3 = [];
}

function handleNextInputScreen() {
    if (selectedTrainers1.length !== 2 || selectedTrainers2.length !== 2) {
        alert('SELECT ANY 2 FROM EACH SET');
        return;
    }
    initializeThirdInputScreen();
    showScreen('third-input-screen');
}

async function updateFirstOutputScreen() {
    if (!selectedThemeImage) {
        console.log('No theme selected');
        return;
    }

    const themeImage = document.querySelector('#first-output-screen .theme-image img');
    if (themeImage) {
        themeImage.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/themes/${selectedThemeImage}.jpg`;
        themeImage.alt = selectedThemeImage;
    }

    try {
        const content = await fetchCSVData();
        if (content && content[selectedThemeImage]) {
            const applyingText = document.getElementById('applying-text');
            const thinkerText = document.getElementById('thinker-text');
            const tedText = document.getElementById('ted-text');
            const articleText = document.getElementById('article-text');

            if (applyingText) applyingText.textContent = content[selectedThemeImage]["APPLYING THE THOUGHT"];
            if (thinkerText) thinkerText.textContent = content[selectedThemeImage]["THINKER AND WORK"];
            if (tedText) tedText.textContent = content[selectedThemeImage]["TED TALK"];
            if (articleText) articleText.textContent = content[selectedThemeImage]["PUBLISHED ARTICLE"];
        }
    } catch (error) {
        console.error('Error updating output screen:', error);
    }
}

async function handleFinalInputScreen() {
    if (selectedTrainers3.length !== 2) {
        alert('SELECT ANY 2');
        return;
    }
    await updateFirstOutputScreen();
    showScreen('first-output-screen');
}

async function updateSecondOutputScreen() {
    if (!selectedThemeImage || selectedTrainers1.length !== 2) {
        console.log('No theme or trainers selected');
        return;
    }

    // Update first trainer
    const trainer1Image = document.getElementById('trainer1-image');
    const trainer1Text = document.getElementById('trainer1-text');
    if (trainer1Image && trainer1Text) {
        trainer1Image.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${selectedTrainers1[0]}.jpg`;
        trainer1Image.alt = selectedTrainers1[0];
    }

    // Update second trainer
    const trainer2Image = document.getElementById('trainer2-image');
    const trainer2Text = document.getElementById('trainer2-text');
    if (trainer2Image && trainer2Text) {
        trainer2Image.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${selectedTrainers1[1]}.jpg`;
        trainer2Image.alt = selectedTrainers1[1];
    }

    try {
        const response = await fetch('https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-app/main/Aimicus%20Text.csv');
        const csvText = await response.text();
        const rows = csvText.split('\n');
        const headers = rows[0].split(',');
        
        // Find the selected theme row
        const themeRow = rows.find(row => row.split(',')[0] === selectedThemeImage);
        
        if (themeRow) {
            const columns = themeRow.split(',');
            // Find column indices for selected trainers
            const trainer1Index = headers.findIndex(header => header.trim() === selectedTrainers1[0]);
            const trainer2Index = headers.findIndex(header => header.trim() === selectedTrainers1[1]);
            
            if (trainer1Text && trainer1Index !== -1) {
                trainer1Text.textContent = columns[trainer1Index].replace(/^"|"$/g, '').trim();
            }
            if (trainer2Text && trainer2Index !== -1) {
                trainer2Text.textContent = columns[trainer2Index].replace(/^"|"$/g, '').trim();
            }
        }
    } catch (error) {
        console.error('Error updating second output screen:', error);
    }
}

// Modify the first output screen's NEXT button behavior
document.querySelector('#first-output-screen .action-button').onclick = async function() {
    await updateSecondOutputScreen();
    showScreen('second-output-screen');
};

async function updateThirdOutputScreen() {
    if (!selectedThemeImage || selectedTrainers2.length !== 2) {
        console.log('No theme or ideas selected');
        return;
    }

    // Get the first selected idea
    const selectedIdea = selectedTrainers2[0];
    
    // Determine the corresponding trainer column
    const trainerColumn = selectedIdea.replace('IDEA OF', 'TRAINERS');

    // Update idea image and trainer image
    const idea1Image = document.getElementById('idea1-image');
    const idea1TrainerImage = document.getElementById('idea1-trainer-image');
    
    if (idea1Image) {
        idea1Image.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${selectedIdea}.jpg`;
        idea1Image.alt = selectedIdea;
    }
    
    if (idea1TrainerImage) {
        idea1TrainerImage.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${trainerColumn}.jpg`;
        idea1TrainerImage.alt = trainerColumn;
    }

    try {
        const response = await fetch('https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-app/main/Aimicus%20Text.csv');
        const csvText = await response.text();
        const rows = csvText.split('\n');
        const headers = rows[0].split(',');
        
        // Find the selected theme row
        const themeRow = rows.find(row => row.split(',')[0] === selectedThemeImage);
        
        if (themeRow) {
            const columns = themeRow.split(',');
            // Find column indices
            const ideaIndex = headers.findIndex(header => header.trim() === selectedIdea);
            const trainerIndex = headers.findIndex(header => header.trim() === trainerColumn);
            
            const idea1Text = document.getElementById('idea1-text');
            const idea1TrainerText = document.getElementById('idea1-trainer-text');
            
            if (idea1Text && ideaIndex !== -1) {
                idea1Text.textContent = columns[ideaIndex].replace(/^"|"$/g, '').trim();
            }
            if (idea1TrainerText && trainerIndex !== -1) {
                idea1TrainerText.textContent = columns[trainerIndex].replace(/^"|"$/g, '').trim();
            }
        }
    } catch (error) {
        console.error('Error updating third output screen:', error);
    }
}

// Update the second output screen's NEXT button onclick
document.querySelector('#second-output-screen .action-button:last-child').onclick = async function() {
    await updateThirdOutputScreen();
    showScreen('third-output-screen');
};

async function updateFourthOutputScreen() {
    if (!selectedThemeImage || selectedTrainers2.length !== 2) {
        console.log('No theme or ideas selected');
        return;
    }

    // Get the second selected idea
    const selectedIdea = selectedTrainers2[1];
    
    // Determine the corresponding trainer column
    const trainerColumn = selectedIdea.replace('IDEA OF', 'TRAINERS');

    // Update idea image and trainer image
    const idea2Image = document.getElementById('idea2-image');
    const idea2TrainerImage = document.getElementById('idea2-trainer-image');
    
    if (idea2Image) {
        idea2Image.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${selectedIdea}.jpg`;
        idea2Image.alt = selectedIdea;
    }
    
    if (idea2TrainerImage) {
        idea2TrainerImage.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${trainerColumn}.jpg`;
        idea2TrainerImage.alt = trainerColumn;
    }

    try {
        const response = await fetch('https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-app/main/Aimicus%20Text.csv');
        const csvText = await response.text();
        const rows = csvText.split('\n');
        const headers = rows[0].split(',');
        
        // Find the selected theme row
        const themeRow = rows.find(row => row.split(',')[0] === selectedThemeImage);
        
        if (themeRow) {
            const columns = themeRow.split(',');
            // Find column indices
            const ideaIndex = headers.findIndex(header => header.trim() === selectedIdea);
            const trainerIndex = headers.findIndex(header => header.trim() === trainerColumn);
            
            const idea2Text = document.getElementById('idea2-text');
            const idea2TrainerText = document.getElementById('idea2-trainer-text');
            
            if (idea2Text && ideaIndex !== -1) {
                idea2Text.textContent = columns[ideaIndex].replace(/^"|"$/g, '').trim();
            }
            if (idea2TrainerText && trainerIndex !== -1) {
                idea2TrainerText.textContent = columns[trainerIndex].replace(/^"|"$/g, '').trim();
            }
        }
    } catch (error) {
        console.error('Error updating fourth output screen:', error);
    }
}

// Update the third output screen's NEXT button onclick
document.querySelector('#third-output-screen .action-button:last-child').onclick = async function() {
    await updateFourthOutputScreen();
    showScreen('fourth-output-screen');
};

async function updateFifthOutputScreen() {
    if (!selectedThemeImage || selectedTrainers3.length !== 2) {
        console.log('No theme or new methods selected');
        return;
    }

    // Get the first selected new method idea
    const selectedIdea = selectedTrainers3[0];
    
    // Determine the corresponding trainer column
    const trainerColumn = selectedIdea.replace('IDEA OF', 'TRAINERS');

    // Update idea image and trainer image
    const newIdea1Image = document.getElementById('new-idea1-image');
    const newIdea1TrainerImage = document.getElementById('new-idea1-trainer-image');
    
    if (newIdea1Image) {
        newIdea1Image.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${selectedIdea}.jpg`;
        newIdea1Image.alt = selectedIdea;
    }
    
    if (newIdea1TrainerImage) {
        newIdea1TrainerImage.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${trainerColumn}.jpg`;
        newIdea1TrainerImage.alt = trainerColumn;
    }

    try {
        const response = await fetch('https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-app/main/Aimicus%20Text.csv');
        const csvText = await response.text();
        const rows = csvText.split('\n');
        const headers = rows[0].split(',');
        
        // Find the selected theme row
        const themeRow = rows.find(row => row.split(',')[0] === selectedThemeImage);
        
        if (themeRow) {
            const columns = themeRow.split(',');
            // Find column indices
            const ideaIndex = headers.findIndex(header => header.trim() === selectedIdea);
            const trainerIndex = headers.findIndex(header => header.trim() === trainerColumn);
            
            const newIdea1Text = document.getElementById('new-idea1-text');
            const newIdea1TrainerText = document.getElementById('new-idea1-trainer-text');
            
            if (newIdea1Text && ideaIndex !== -1) {
                newIdea1Text.textContent = columns[ideaIndex].replace(/^"|"$/g, '').trim();
            }
            if (newIdea1TrainerText && trainerIndex !== -1) {
                newIdea1TrainerText.textContent = columns[trainerIndex].replace(/^"|"$/g, '').trim();
            }
        }
    } catch (error) {
        console.error('Error updating fifth output screen:', error);
    }
}

async function updateSixthOutputScreen() {
    if (!selectedThemeImage || selectedTrainers3.length !== 2) {
        console.log('No theme or new methods selected');
        return;
    }

    // Get the second selected new method idea
    const selectedIdea = selectedTrainers3[1];
    
    // Determine the corresponding trainer column
    const trainerColumn = selectedIdea.replace('IDEA OF', 'TRAINERS');

    // Update idea image and trainer image
    const newIdea2Image = document.getElementById('new-idea2-image');
    const newIdea2TrainerImage = document.getElementById('new-idea2-trainer-image');
    
    if (newIdea2Image) {
        newIdea2Image.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${selectedIdea}.jpg`;
        newIdea2Image.alt = selectedIdea;
    }
    
    if (newIdea2TrainerImage) {
        newIdea2TrainerImage.src = `https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-images/main/columns/${trainerColumn}.jpg`;
        newIdea2TrainerImage.alt = trainerColumn;
    }

    try {
        const response = await fetch('https://raw.githubusercontent.com/Paragpandey-hrtools/aimicus-app/main/Aimicus%20Text.csv');
        const csvText = await response.text();
        const rows = csvText.split('\n');
        const headers = rows[0].split(',');
        
        // Find the selected theme row
        const themeRow = rows.find(row => row.split(',')[0] === selectedThemeImage);
        
        if (themeRow) {
            const columns = themeRow.split(',');
            // Find column indices
            const ideaIndex = headers.findIndex(header => header.trim() === selectedIdea);
            const trainerIndex = headers.findIndex(header => header.trim() === trainerColumn);
            
            const newIdea2Text = document.getElementById('new-idea2-text');
            const newIdea2TrainerText = document.getElementById('new-idea2-trainer-text');
            
            if (newIdea2Text && ideaIndex !== -1) {
                newIdea2Text.textContent = columns[ideaIndex].replace(/^"|"$/g, '').trim();
            }
            if (newIdea2TrainerText && trainerIndex !== -1) {
                newIdea2TrainerText.textContent = columns[trainerIndex].replace(/^"|"$/g, '').trim();
            }
        }
    } catch (error) {
        console.error('Error updating sixth output screen:', error);
    }
}

// Update the fourth output screen's NEXT button onclick
document.querySelector('#fourth-output-screen .action-button:last-child').onclick = async function() {
    await updateFifthOutputScreen();
    showScreen('fifth-output-screen');
};

// Update the fifth output screen's NEXT button onclick
document.querySelector('#fifth-output-screen .action-button:last-child').onclick = async function() {
    await updateSixthOutputScreen();
    showScreen('sixth-output-screen');
};

// Update the sixth output screen's NEXT button onclick
document.querySelector('#sixth-output-screen .action-button:last-child').onclick = function() {
    showScreen('conclusion-screen');
    updateAttemptsDisplay();
};

function toggleText(elementId) {
  const textElement = document.getElementById(elementId);
  const button = textElement.nextElementSibling;
  
  if (!textElement || !button) return;
  
  if (textElement.classList.contains('expanded')) {
    textElement.classList.remove('expanded');
    button.textContent = '...see more';
  } else {
    textElement.classList.add('expanded');
    button.textContent = 'Show less';
  }
}

function updateAttemptsDisplay() {
    const attemptsElement = document.getElementById('attempts-remaining');
    if (attemptsElement) {
        attemptsElement.textContent = attemptsRemaining;
    }
    
    // Disable START OVER button if no attempts remaining
    const startOverButton = document.getElementById('start-over-button');
    if (startOverButton) {
        if (attemptsRemaining <= 0) {
            startOverButton.disabled = true;
            startOverButton.style.backgroundColor = '#cccccc';
            startOverButton.style.cursor = 'not-allowed';
        } else {
            startOverButton.disabled = false;
            startOverButton.style.backgroundColor = '#4CAF50';
            startOverButton.style.cursor = 'pointer';
        }
    }
}

function handleStartOver() {
    if (attemptsRemaining > 0) {
        // Reset selections
        selectedThemeImage = null;
        selectedTrainers1 = [];
        selectedTrainers2 = [];
        selectedTrainers3 = [];
        
        // Initialize and show first input screen with new random themes
        initializeAndShowInputScreen();
    }
}

function handleExit() {
    // Show confirmation dialog
    if (confirm('Are you sure you want to exit?')) {
        // Reset everything
        attemptsRemaining = 4;
        selectedThemeImage = null;
        selectedTrainers1 = [];
        selectedTrainers2 = [];
        selectedTrainers3 = [];
        
        // Return to landing screen
        showScreen('landing-screen');
    }
}

</script>
</body>
</html>
